{% extends 'nexuspdf_base.html' %}

{% block title %}Comprimir PDF - NexusPDF{% endblock %}

{% block meta_description %}Compressor de PDF online NexusPDF: reduza o tamanho de arquivos PDF mantendo a legibilidade, com resumo de compressão e diferentes níveis de qualidade para compartilhamento em e-mail, WhatsApp e armazenamento.{% endblock %}
{% block meta_keywords %}comprimir pdf, compressor pdf online, reduzir tamanho pdf, otimizar pdf, pdf menor para email, pdf whatsapp, compactar pdf, nexuspdf compressor{% endblock %}

{% block extra_styles %}
    {{ super() }}
    <style>
        .pdf-suite-choice-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 0.75rem;
        }

        .pdf-suite-choice {
            cursor: pointer;
        }

        .pdf-suite-choice input {
            display: none;
        }

        .pdf-suite-choice span {
            display: block;
            padding: 0.65rem 0.9rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.45);
            background: rgba(2, 6, 23, 0.35);
            text-align: center;
            font-size: 0.9rem;
            font-weight: 800;
            color: rgba(226, 232, 240, 0.9);
            transition: var(--transition-base);
        }

        .pdf-suite-choice input:checked + span {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.95), rgba(99, 102, 241, 0.95));
            border-color: transparent;
            box-shadow: 0 14px 40px rgba(14, 165, 233, 0.25);
            color: #fff;
        }

        @media (max-width: 640px) {
            .pdf-suite-choice-grid {
                grid-template-columns: minmax(0, 1fr);
            }
        }
    </style>
{% endblock %}

{% block pdf_suite_title %}Comprimir PDF{% endblock %}

{% block pdf_suite_subtitle %}Envie um PDF e escolha o nível de compressão para reduzir o tamanho mantendo a legibilidade.{% endblock %}

{% block pdf_suite_content %}
<div class="pdf-suite-grid">
    <section class="pdf-suite-panel">
        <div class="pdf-suite-panel-title"><i class="bi bi-sliders"></i> Configurações</div>

        <form action="{{ url_for('nexuspdf_comprimir_pdf.comprimir_pdf') }}" method="post" enctype="multipart/form-data">
            <div class="pdf-suite-field">
                <label class="pdf-suite-label">Arquivo PDF</label>
                <input type="file" name="pdf_file" accept="application/pdf" required class="pdf-suite-input" />
                <div class="pdf-suite-hint">Dica: PDFs com muitas imagens escaneadas tendem a comprimir mais.</div>
                <div class="pdf-suite-file-summary" data-file-summary></div>
            </div>

            <div class="pdf-suite-field">
                <label class="pdf-suite-label">Nível de compressão</label>
                <div class="pdf-suite-choice-grid">
                    <label class="pdf-suite-choice">
                        <input type="radio" name="quality" value="baixa">
                        <span>Baixa</span>
                    </label>
                    <label class="pdf-suite-choice">
                        <input type="radio" name="quality" value="media" checked>
                        <span>Média</span>
                    </label>
                    <label class="pdf-suite-choice">
                        <input type="radio" name="quality" value="alta">
                        <span>Alta</span>
                    </label>
                </div>
            </div>

            <div class="pdf-suite-actions">
                <button type="submit" class="btn-primary-compress">
                    <i class="bi bi-file-earmark-zip"></i>
                    Comprimir PDF
                </button>
            </div>
        </form>
    </section>

    <section class="pdf-suite-panel">
        <div class="pdf-suite-panel-title"><i class="bi bi-graph-up"></i> Resultado</div>

        {% if result %}
        <div class="pdf-suite-result">
            <div class="pdf-suite-hint">
                <div><strong>Tamanho original:</strong> {{ (result.original_size / 1024 / 1024)|round(2) }} MB</div>
                <div><strong>Tamanho comprimido:</strong> {{ (result.compressed_size / 1024 / 1024)|round(2) }} MB</div>
                <div><strong>Redução:</strong> {{ result.reduction_percent }}%</div>
                <div><strong>Perfil:</strong> {{ result.quality|capitalize }}</div>
            </div>
            <div class="pdf-suite-actions" style="margin-top: 0;">
                <a href="{{ url_for('nexuspdf_comprimir_pdf.comprimir_pdf_download', filename=result.filename) }}" class="btn-primary-compress" style="text-decoration: none;">
                    <i class="bi bi-download"></i>
                    Baixar PDF
                </a>
            </div>
        </div>
        {% else %}
        <div class="pdf-suite-hint">
            Faça upload de um PDF para ver o resumo da compressão e liberar o download.
        </div>
        {% endif %}

        <div class="adsense-slot" style="margin-top: 1.25rem; text-align: center;"></div>
    </section>
</div>

<section class="pdf-suite-panel" style="margin-top: 1.25rem;">
    <div class="pdf-suite-panel-title"><i class="bi bi-lightbulb"></i> Por que comprimir um PDF?</div>
    <div class="pdf-suite-hint">
        PDFs ficam pesados quando contêm imagens ou digitalizações. Aqui você reduz o tamanho para facilitar envio por e-mail, WhatsApp e plataformas que limitam anexos.
        A compressão otimiza a estrutura interna do documento para downloads e visualização mais rápidos.
    </div>
</section>
{% endblock %}
